{"version":3,"file":"data-layer.cjs.production.min.js","sources":["../src/services/fetch/fetch.ts","../src/services/converter/converter.ts"],"sourcesContent":["import axios, { AxiosPromise } from 'axios';\nimport { RequestConfig } from './fetch.interface';\n\nconst yahoo = axios.create({\n  baseURL: 'https://query1.finance.yahoo.com/v7/finance/download/',\n});\n\nconst apiMapper = {\n  yahoo,\n};\n\nexport const fetch = <T>({\n  api = 'yahoo',\n  url = '/',\n  method = 'GET',\n  headers = {},\n  params = {},\n  data = {},\n  ...config\n}: RequestConfig): AxiosPromise<T> => {\n  return apiMapper[api]({\n    url,\n    method,\n    headers,\n    params,\n    data,\n    ...config,\n  });\n};\n","import { ConverterInterface } from './converter.interface';\n\nexport class Converter<T extends string> implements ConverterInterface<T> {\n  constructor(private data: string | string[]) {}\n\n  toCSV() {\n    if (typeof this.data === 'string') {\n      this.data = this.data.split('\\n');\n    }\n    return this;\n  }\n\n  toJSON() {\n    if (Array.isArray(this.data)) {\n      const header = this.data[0].split(',');\n      const data = this.data.slice(1);\n      // @ts-ignore\n      this.data = data.reduce((acc, item) => {\n        const obj = {};\n\n        if (item.includes('null')) {\n          return acc;\n        }\n\n        item.split(',').forEach((val, i) => {\n          // @ts-ignore\n          obj[header[i].replace(' ', '')] = val;\n        });\n\n        return [...acc, obj];\n      }, <object[]>[]);\n\n      return this;\n    }\n    return this;\n  }\n\n  save() {\n    return this.data;\n  }\n}\n"],"names":["apiMapper","yahoo","axios","create","baseURL","data","this","_proto","toCSV","split","toJSON","Array","isArray","header","slice","reduce","acc","item","obj","includes","forEach","val","i","replace","save","api","url","method","headers","params","config"],"mappings":"0aAOMA,EAAY,CAChBC,MALYC,EAAMC,OAAO,CACzBC,QAAS,wFCDT,WAAoBC,GAAAC,UAAAD,EADtB,kBAAA,OAAAE,EAGEC,MAAA,WAIE,MAHyB,iBAAdF,KAAKD,OACdC,KAAKD,KAAOC,KAAKD,KAAKI,MAAM,OAEvBH,MAPXC,EAUEG,OAAA,WACE,GAAIC,MAAMC,QAAQN,KAAKD,MAAO,CAC5B,IAAMQ,EAASP,KAAKD,KAAK,GAAGI,MAAM,KAC5BJ,EAAOC,KAAKD,KAAKS,MAAM,GAiB7B,OAfAR,KAAKD,KAAOA,EAAKU,QAAO,SAACC,EAAKC,GAC5B,IAAMC,EAAM,GAEZ,OAAID,EAAKE,SAAS,QACTH,GAGTC,EAAKR,MAAM,KAAKW,SAAQ,SAACC,EAAKC,GAE5BJ,EAAIL,EAAOS,GAAGC,QAAQ,IAAK,KAAOF,eAGzBL,GAAKE,OACL,IAENZ,KAET,OAAOA,MAhCXC,EAmCEiB,KAAA,WACE,OAAOlB,KAAKD,yBD3BK,oBACnBoB,IAAAA,aAAM,cACNC,IAAAA,aAAM,UACNC,OAAAA,aAAS,YACTC,QAAAA,aAAU,SACVC,OAAAA,aAAS,SACTxB,KAAAA,aAAO,KACJyB,0IAEH,OAAO9B,EAAUyB,MACfC,IAAAA,EACAC,OAAAA,EACAC,QAAAA,EACAC,OAAAA,EACAxB,KAAAA,GACGyB"}